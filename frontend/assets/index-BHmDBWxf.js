import{_ as v,b as y,r as V,c as E,d as b,x as h,f as s,w as r,p as C,E as F,h as B,m as R,n as p,an as U,e as d,C as k,aW as q,v as u}from"./index-gZy6T0gL.js";/* empty css                *//* empty css                 *//* empty css                 */const I={class:"app-container"},N={__name:"index",setup(S){const m=y(),l=V(null),o=E({oldPassword:"",newPassword:"",confirmPassword:""}),f={oldPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"密码长度为6-20位",trigger:"blur"}],confirmPassword:[{required:!0,validator:(w,e,a)=>{e===""?a(new Error("请再次输入新密码")):e!==o.newPassword?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}]},c=async()=>{l.value&&await l.value.validate(async w=>{if(w)try{await q({oldPassword:o.oldPassword,newPassword:o.newPassword,confirmPassword:o.confirmPassword}),u.success("密码修改成功，即将跳转到登录页面"),setTimeout(async()=>{await m.logout(),window.location.href="/login"},1500)}catch(e){console.error("修改密码失败:",e),u.error(e.message||"修改密码失败")}})},_=()=>{l.value&&l.value.resetFields()};return(w,e)=>{const a=B,n=F,i=R,P=C,g=U,x=k;return h(),b("div",I,[s(x,{shadow:"never"},{header:r(()=>[...e[3]||(e[3]=[d("div",{class:"card-header"},[d("span",{class:"card-title"},"修改密码")],-1)])]),default:r(()=>[s(P,{ref_key:"passwordFormRef",ref:l,model:o,rules:f,"label-width":"120px",style:{"max-width":"600px"}},{default:r(()=>[s(n,{label:"当前密码",prop:"oldPassword"},{default:r(()=>[s(a,{modelValue:o.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=t=>o.oldPassword=t),type:"password",placeholder:"请输入当前密码","show-password":""},null,8,["modelValue"])]),_:1}),s(n,{label:"新密码",prop:"newPassword"},{default:r(()=>[s(a,{modelValue:o.newPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>o.newPassword=t),type:"password",placeholder:"请输入新密码（6-20位）","show-password":""},null,8,["modelValue"])]),_:1}),s(n,{label:"确认新密码",prop:"confirmPassword"},{default:r(()=>[s(a,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>o.confirmPassword=t),type:"password",placeholder:"请再次输入新密码","show-password":""},null,8,["modelValue"])]),_:1}),s(n,null,{default:r(()=>[s(i,{type:"primary",onClick:c},{default:r(()=>[...e[4]||(e[4]=[p("确认修改",-1)])]),_:1}),s(i,{onClick:_},{default:r(()=>[...e[5]||(e[5]=[p("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),s(g,{title:"温馨提示",type:"warning",closable:!1,style:{"max-width":"600px","margin-top":"20px"}},{default:r(()=>[...e[6]||(e[6]=[d("p",null,"• 密码长度为6-20位",-1),d("p",null,"• 修改密码后需要重新登录",-1),d("p",null,"• 请妥善保管您的密码，不要告诉他人",-1)])]),_:1})]),_:1})])}}},z=v(N,[["__scopeId","data-v-c4da9a29"]]);export{z as default};
