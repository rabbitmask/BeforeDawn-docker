import{_ as Ve,r as i,y as Ce,a as J,z as ke,c as R,o as C,d as e,w as a,B as we,C as Te,k as De,l as Ee,m as f,Z as xe,af as he,G as I,a2 as K,F as Le,D as Ne,ag as Fe,b as v,t as w,q as ze,ah as P,a3 as Q,a4 as W,S as Be,s as n,J as X,I as Oe,a5 as Ue,a1 as $e,H as Re,a0 as Ie,L as Se,E as je,j as qe,a7 as Ae,a8 as Me,a9 as Ze,ae as Ge,x as p,aa as Y}from"./index-bBUAzOnK.js";/* empty css                   *//* empty css                 *//* empty css                        *//* empty css                   *//* empty css                       *//* empty css               *//* empty css                        *//* empty css               *//* empty css                */import{a as He}from"./index-BUyVPmSR.js";import{g as Je,d as Ke,a as Pe,u as Qe,c as We,b as Xe,e as Ye,f as el}from"./dict-BgffWH13.js";const ll={class:"page-container dict-container"},al={class:"card-header"},tl=["onClick"],ol={class:"type-info"},sl={class:"type-name"},dl={class:"type-code"},il={class:"type-actions"},rl={class:"card-header"},nl={__name:"index",setup(ul){const S=i(!1),L=i([]),k=i(""),d=i(null),j=Ce(()=>k.value?L.value.filter(t=>t.dictName.includes(k.value)||t.dictCode.includes(k.value)):L.value),N=i(!1),F=i([]),g=i(!1),z=i(""),T=i(!1),D=i(null),r=J({id:null,dictName:"",dictCode:"",description:"",status:1}),ee={dictName:[{required:!0,message:"请输入字典名称",trigger:"blur"}],dictCode:[{required:!0,message:"请输入字典编码",trigger:"blur"},{pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/,message:"字典编码只能包含字母、数字、下划线，且不能以数字开头",trigger:"blur"}]},b=i(!1),B=i(""),O=i(!1),E=i(null),s=J({id:null,dictTypeCode:"",dictLabel:"",dictValue:"",sortOrder:0,remark:"",status:1}),le={dictLabel:[{required:!0,message:"请输入字典标签",trigger:"blur"}],dictValue:[{required:!0,message:"请输入字典值",trigger:"blur"}]},V=i(!1),U=async()=>{S.value=!0;try{const t=await Je();L.value=t||[]}catch(t){console.error("加载字典类型列表失败:",t),p.error("加载字典类型列表失败")}finally{S.value=!1}},$=async()=>{if(d.value){N.value=!0;try{const t=await el(d.value.dictCode);F.value=t||[]}catch(t){console.error("加载字典数据列表失败:",t),p.error("加载字典数据列表失败")}finally{N.value=!1}}},ae=()=>{},te=t=>{d.value=t,$()},oe=()=>{T.value=!1,z.value="新增字典类型",Object.assign(r,{id:null,dictName:"",dictCode:"",description:"",status:1}),g.value=!0},se=t=>{T.value=!0,z.value="编辑字典类型",Object.assign(r,{id:t.id,dictName:t.dictName,dictCode:t.dictCode,description:t.description,status:t.status}),g.value=!0},de=t=>{Y.confirm(`确定要删除字典类型 "${t.dictName}" 吗？删除后该类型下的所有字典数据也将被删除！`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await Ke(t.id),p.success("删除字典类型成功"),d.value&&d.value.id===t.id&&(d.value=null,F.value=[]),U()}catch(l){console.error("删除字典类型失败:",l)}}).catch(()=>{})},ie=()=>{var t;(t=D.value)==null||t.resetFields()},re=async()=>{D.value&&await D.value.validate(async t=>{if(t){V.value=!0;try{T.value?(await Qe(r.id,r),p.success("更新字典类型成功")):(await We(r),p.success("创建字典类型成功")),g.value=!1,U()}catch(l){console.error("保存字典类型失败:",l)}finally{V.value=!1}}})},ne=()=>{if(!d.value){p.warning("请先选择字典类型");return}O.value=!1,B.value="新增字典数据",Object.assign(s,{id:null,dictTypeCode:d.value.dictCode,dictLabel:"",dictValue:"",sortOrder:0,remark:"",status:1}),b.value=!0},ue=t=>{O.value=!0,B.value="编辑字典数据",Object.assign(s,{id:t.id,dictTypeCode:t.dictTypeCode,dictLabel:t.dictLabel,dictValue:t.dictValue,sortOrder:t.sortOrder,remark:t.remark,status:t.status}),b.value=!0},ce=t=>{Y.confirm(`确定要删除字典数据 "${t.dictLabel}" 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await Pe(t.id),p.success("删除字典数据成功"),$()}catch(l){console.error("删除字典数据失败:",l)}}).catch(()=>{})},pe=()=>{var t;(t=E.value)==null||t.resetFields()},me=async()=>{E.value&&await E.value.validate(async t=>{if(t){V.value=!0;try{O.value?(await Xe(s.id,s),p.success("更新字典数据成功")):(await Ye(s),p.success("创建字典数据成功")),b.value=!1,$()}catch(l){console.error("保存字典数据失败:",l)}finally{V.value=!1}}})};return ke(()=>{U()}),(t,l)=>{const _=Ee,u=ze,m=De,q=Be,fe=he,A=Te,M=we,y=$e,ve=Re,_e=Ue,ye=Se,c=qe,x=Me,Z=Ae,G=je,H=Ze,ge=Ge,be=Ie;return C(),R("div",ll,[e(ye,{gutter:20,style:{height:"100%"}},{default:a(()=>[e(M,{span:8},{default:a(()=>[e(A,{shadow:"never",class:"dict-type-card"},{header:a(()=>[v("div",al,[l[15]||(l[15]=v("span",null,"字典类型",-1)),e(u,{type:"primary",size:"small",onClick:oe},{default:a(()=>[e(_,null,{default:a(()=>[e(f(X))]),_:1}),l[14]||(l[14]=n(" 新增 ",-1))]),_:1})])]),default:a(()=>[e(m,{modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=o=>k.value=o),placeholder:"搜索字典类型",clearable:"",style:{"margin-bottom":"15px"},onInput:ae},{prefix:a(()=>[e(_,null,{default:a(()=>[e(f(xe))]),_:1})]),_:1},8,["modelValue"]),e(fe,{height:"calc(100vh - 280px)"},{default:a(()=>[(C(!0),R(Le,null,Ne(j.value,o=>(C(),R("div",{key:o.id,class:Fe(["type-item",{active:d.value&&d.value.id===o.id}]),onClick:h=>te(o)},[v("div",ol,[v("div",sl,w(o.dictName),1),v("div",dl,w(o.dictCode),1)]),v("div",il,[e(u,{link:"",type:"primary",size:"small",onClick:P(h=>se(o),["stop"])},{default:a(()=>[e(_,null,{default:a(()=>[e(f(Q))]),_:1})]),_:1},8,["onClick"]),e(u,{link:"",type:"danger",size:"small",onClick:P(h=>de(o),["stop"])},{default:a(()=>[e(_,null,{default:a(()=>[e(f(W))]),_:1})]),_:1},8,["onClick"])])],10,tl))),128)),j.value.length===0?(C(),I(q,{key:0,description:"暂无字典类型","image-size":100})):K("",!0)]),_:1})]),_:1})]),_:1}),e(M,{span:16},{default:a(()=>[e(A,{shadow:"never",class:"dict-data-card"},{header:a(()=>[v("div",rl,[v("span",null,w(d.value?`字典数据 - ${d.value.dictName}`:"字典数据"),1),e(u,{type:"primary",size:"small",disabled:!d.value,onClick:ne},{default:a(()=>[e(_,null,{default:a(()=>[e(f(X))]),_:1}),l[16]||(l[16]=n(" 新增 ",-1))]),_:1},8,["disabled"])])]),default:a(()=>[Oe((C(),I(_e,{data:F.value,border:"",stripe:"",style:{width:"100%"},height:"calc(100vh - 280px)"},{default:a(()=>[e(y,{prop:"dictLabel",label:"字典标签","min-width":"120"}),e(y,{prop:"dictValue",label:"字典值",width:"120"}),e(y,{prop:"sortOrder",label:"排序",width:"80",align:"center"}),e(y,{label:"状态",width:"80",align:"center"},{default:a(({row:o})=>[e(ve,{type:o.status===1?"success":"danger",size:"small"},{default:a(()=>[n(w(o.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(y,{prop:"remark",label:"备注","min-width":"150","show-overflow-tooltip":""}),e(y,{prop:"createTime",label:"创建时间",width:"180"},{default:a(({row:o})=>[n(w(f(He)(o.createTime)),1)]),_:1}),e(y,{label:"操作",width:"150",fixed:"right",align:"center"},{default:a(({row:o})=>[e(u,{link:"",type:"primary",size:"small",onClick:h=>ue(o)},{default:a(()=>[e(_,null,{default:a(()=>[e(f(Q))]),_:1}),l[17]||(l[17]=n(" 编辑 ",-1))]),_:1},8,["onClick"]),e(u,{link:"",type:"danger",size:"small",onClick:h=>ce(o)},{default:a(()=>[e(_,null,{default:a(()=>[e(f(W))]),_:1}),l[18]||(l[18]=n(" 删除 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[be,N.value]]),d.value?K("",!0):(C(),I(q,{key:0,description:"请选择左侧字典类型","image-size":150}))]),_:1})]),_:1})]),_:1}),e(H,{modelValue:g.value,"onUpdate:modelValue":l[6]||(l[6]=o=>g.value=o),title:z.value,width:"600px",onClose:ie},{footer:a(()=>[e(u,{onClick:l[5]||(l[5]=o=>g.value=!1)},{default:a(()=>[...l[21]||(l[21]=[n("取消",-1)])]),_:1}),e(u,{type:"primary",onClick:re,loading:V.value},{default:a(()=>[...l[22]||(l[22]=[n(" 确定 ",-1)])]),_:1},8,["loading"])]),default:a(()=>[e(G,{ref_key:"typeFormRef",ref:D,model:r,rules:ee,"label-width":"100px"},{default:a(()=>[e(c,{label:"字典名称",prop:"dictName"},{default:a(()=>[e(m,{modelValue:r.dictName,"onUpdate:modelValue":l[1]||(l[1]=o=>r.dictName=o),placeholder:"请输入字典名称"},null,8,["modelValue"])]),_:1}),e(c,{label:"字典编码",prop:"dictCode"},{default:a(()=>[e(m,{modelValue:r.dictCode,"onUpdate:modelValue":l[2]||(l[2]=o=>r.dictCode=o),placeholder:"请输入字典编码（英文标识）",disabled:T.value},null,8,["modelValue","disabled"])]),_:1}),e(c,{label:"描述",prop:"description"},{default:a(()=>[e(m,{modelValue:r.description,"onUpdate:modelValue":l[3]||(l[3]=o=>r.description=o),type:"textarea",rows:3,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),e(c,{label:"状态",prop:"status"},{default:a(()=>[e(Z,{modelValue:r.status,"onUpdate:modelValue":l[4]||(l[4]=o=>r.status=o)},{default:a(()=>[e(x,{value:1},{default:a(()=>[...l[19]||(l[19]=[n("启用",-1)])]),_:1}),e(x,{value:0},{default:a(()=>[...l[20]||(l[20]=[n("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(H,{modelValue:b.value,"onUpdate:modelValue":l[13]||(l[13]=o=>b.value=o),title:B.value,width:"600px",onClose:pe},{footer:a(()=>[e(u,{onClick:l[12]||(l[12]=o=>b.value=!1)},{default:a(()=>[...l[25]||(l[25]=[n("取消",-1)])]),_:1}),e(u,{type:"primary",onClick:me,loading:V.value},{default:a(()=>[...l[26]||(l[26]=[n(" 确定 ",-1)])]),_:1},8,["loading"])]),default:a(()=>[e(G,{ref_key:"dataFormRef",ref:E,model:s,rules:le,"label-width":"100px"},{default:a(()=>[e(c,{label:"字典类型"},{default:a(()=>{var o;return[e(m,{value:(o=d.value)==null?void 0:o.dictName,disabled:""},null,8,["value"])]}),_:1}),e(c,{label:"字典标签",prop:"dictLabel"},{default:a(()=>[e(m,{modelValue:s.dictLabel,"onUpdate:modelValue":l[7]||(l[7]=o=>s.dictLabel=o),placeholder:"请输入字典标签（显示名称）"},null,8,["modelValue"])]),_:1}),e(c,{label:"字典值",prop:"dictValue"},{default:a(()=>[e(m,{modelValue:s.dictValue,"onUpdate:modelValue":l[8]||(l[8]=o=>s.dictValue=o),placeholder:"请输入字典值（实际值）"},null,8,["modelValue"])]),_:1}),e(c,{label:"排序",prop:"sortOrder"},{default:a(()=>[e(ge,{modelValue:s.sortOrder,"onUpdate:modelValue":l[9]||(l[9]=o=>s.sortOrder=o),min:0,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(c,{label:"备注",prop:"remark"},{default:a(()=>[e(m,{modelValue:s.remark,"onUpdate:modelValue":l[10]||(l[10]=o=>s.remark=o),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),e(c,{label:"状态",prop:"status"},{default:a(()=>[e(Z,{modelValue:s.status,"onUpdate:modelValue":l[11]||(l[11]=o=>s.status=o)},{default:a(()=>[e(x,{value:1},{default:a(()=>[...l[23]||(l[23]=[n("启用",-1)])]),_:1}),e(x,{value:0},{default:a(()=>[...l[24]||(l[24]=[n("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},wl=Ve(nl,[["__scopeId","data-v-0eacd70d"]]);export{wl as default};
