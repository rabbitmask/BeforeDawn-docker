import{_ as B,r as k,z,A,c as E,o as O,d as a,w as o,C as S,D as L,b as s,l as V,m as p,aK as X,t as f,aG as M,b6 as N,P as R,M as T}from"./index-CQ5fPb9W.js";/* empty css               *//* empty css                */import{a as G}from"./statistics-BEHDKaiv.js";import{i as _}from"./index-Bb6yjXMn.js";const K={class:"app-container"},P={class:"stat-content"},U={class:"stat-icon",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},j={class:"stat-info"},q={class:"stat-value"},F={class:"stat-content"},H={class:"stat-icon",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"}},J={class:"stat-info"},Q={class:"stat-value"},W={class:"stat-content"},Y={class:"stat-icon",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"}},Z={class:"stat-info"},$={class:"stat-value"},I={class:"stat-content"},tt={class:"stat-icon",style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"}},et={class:"stat-info"},st={class:"stat-value"},at={__name:"index",setup(ot){const e=k({});let r=null,d=null,u=null,c=null;const h=async()=>{try{const l=await G();e.value=l,y(),b()}catch(l){console.error("加载统计数据失败:",l)}},y=()=>{const l=(t,v)=>{const i=t==null?void 0:t.find(n=>n.value===v);return Number((i==null?void 0:i.count)||0)};e.value.statusCount&&Array.isArray(e.value.statusCount)&&(e.value.statusDistribution=e.value.statusCount.map(t=>({name:t.label,value:t.count}))),e.value.riskLevelCount&&Array.isArray(e.value.riskLevelCount)&&(e.value.riskDistribution=e.value.riskLevelCount.map(t=>({name:t.label,value:t.count}))),e.value.typeCount&&Array.isArray(e.value.typeCount)&&(e.value.typeDistribution=e.value.typeCount.map(t=>({name:t.label,value:t.count}))),e.value.sourceCount&&Array.isArray(e.value.sourceCount)&&(e.value.sourceDistribution=e.value.sourceCount.map(t=>({name:t.label,value:t.count}))),e.value.statusCount&&Array.isArray(e.value.statusCount)&&(e.value.pendingCount=l(e.value.statusCount,"submitted")+l(e.value.statusCount,"assigned"),e.value.fixingCount=l(e.value.statusCount,"fixing")+l(e.value.statusCount,"retesting"),e.value.closedCount=l(e.value.statusCount,"closed"))},b=()=>{C(),w(),x(),D()},C=()=>{const l=document.getElementById("statusChart");r=_(l);const t={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"漏洞状态",type:"pie",radius:"60%",data:e.value.statusDistribution||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(t)},w=()=>{const l=document.getElementById("riskChart");d=_(l);const t={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"风险等级",type:"pie",radius:"60%",data:e.value.riskDistribution||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};d.setOption(t)},x=()=>{const l=document.getElementById("typeChart");u=_(l);const t={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"漏洞类型",type:"pie",radius:"60%",data:e.value.typeDistribution||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};u.setOption(t)},D=()=>{const l=document.getElementById("sourceChart");c=_(l);const t={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"漏洞来源",type:"pie",radius:"60%",data:e.value.sourceDistribution||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};c.setOption(t)},g=()=>{r==null||r.resize(),d==null||d.resize(),u==null||u.resize(),c==null||c.resize()};return z(()=>{h(),window.addEventListener("resize",g)}),A(()=>{r==null||r.dispose(),d==null||d.dispose(),u==null||u.dispose(),c==null||c.dispose(),window.removeEventListener("resize",g)}),(l,t)=>{const v=V,i=L,n=S,m=T;return O(),E("div",K,[a(m,{gutter:20},{default:o(()=>[a(n,{span:6},{default:o(()=>[a(i,{shadow:"hover",class:"stat-card"},{default:o(()=>[s("div",P,[s("div",U,[a(v,{size:32},{default:o(()=>[a(p(X))]),_:1})]),s("div",j,[t[0]||(t[0]=s("div",{class:"stat-label"},"漏洞总数",-1)),s("div",q,f(e.value.totalCount||0),1)])])]),_:1})]),_:1}),a(n,{span:6},{default:o(()=>[a(i,{shadow:"hover",class:"stat-card"},{default:o(()=>[s("div",F,[s("div",H,[a(v,{size:32},{default:o(()=>[a(p(M))]),_:1})]),s("div",J,[t[1]||(t[1]=s("div",{class:"stat-label"},"待处理",-1)),s("div",Q,f(e.value.pendingCount||0),1)])])]),_:1})]),_:1}),a(n,{span:6},{default:o(()=>[a(i,{shadow:"hover",class:"stat-card"},{default:o(()=>[s("div",W,[s("div",Y,[a(v,{size:32},{default:o(()=>[a(p(N))]),_:1})]),s("div",Z,[t[2]||(t[2]=s("div",{class:"stat-label"},"修复中",-1)),s("div",$,f(e.value.fixingCount||0),1)])])]),_:1})]),_:1}),a(n,{span:6},{default:o(()=>[a(i,{shadow:"hover",class:"stat-card"},{default:o(()=>[s("div",I,[s("div",tt,[a(v,{size:32},{default:o(()=>[a(p(R))]),_:1})]),s("div",et,[t[3]||(t[3]=s("div",{class:"stat-label"},"已关闭",-1)),s("div",st,f(e.value.closedCount||0),1)])])]),_:1})]),_:1})]),_:1}),a(m,{gutter:20,style:{"margin-top":"20px"}},{default:o(()=>[a(n,{span:12},{default:o(()=>[a(i,{shadow:"never"},{header:o(()=>[...t[4]||(t[4]=[s("div",{class:"card-header"},[s("span",{class:"card-title"},"漏洞状态分布")],-1)])]),default:o(()=>[t[5]||(t[5]=s("div",{id:"statusChart",style:{height:"300px"}},null,-1))]),_:1})]),_:1}),a(n,{span:12},{default:o(()=>[a(i,{shadow:"never"},{header:o(()=>[...t[6]||(t[6]=[s("div",{class:"card-header"},[s("span",{class:"card-title"},"风险等级分布")],-1)])]),default:o(()=>[t[7]||(t[7]=s("div",{id:"riskChart",style:{height:"300px"}},null,-1))]),_:1})]),_:1})]),_:1}),a(m,{gutter:20,style:{"margin-top":"20px"}},{default:o(()=>[a(n,{span:12},{default:o(()=>[a(i,{shadow:"never"},{header:o(()=>[...t[8]||(t[8]=[s("div",{class:"card-header"},[s("span",{class:"card-title"},"漏洞类型分布")],-1)])]),default:o(()=>[t[9]||(t[9]=s("div",{id:"typeChart",style:{height:"300px"}},null,-1))]),_:1})]),_:1}),a(n,{span:12},{default:o(()=>[a(i,{shadow:"never"},{header:o(()=>[...t[10]||(t[10]=[s("div",{class:"card-header"},[s("span",{class:"card-title"},"漏洞来源分布")],-1)])]),default:o(()=>[t[11]||(t[11]=s("div",{id:"sourceChart",style:{height:"300px"}},null,-1))]),_:1})]),_:1})]),_:1})])}}},ut=B(at,[["__scopeId","data-v-e48864a8"]]);export{ut as default};
