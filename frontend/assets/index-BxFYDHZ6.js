import{_ as B,r as k,t as z,v as A,c as E,o as O,e as a,w as o,y as S,E as L,b as s,H as N,A as p,aS as V,z as f,aO as X,be as R,N as M,K as T}from"./index-DG9m7imz.js";/* empty css               *//* empty css                */import{a as H}from"./statistics-Bv-euc0B.js";import{i as _}from"./index-Bb6yjXMn.js";const K={class:"app-container"},U={class:"stat-content"},j={class:"stat-icon",style:{background:"linear-gradient(135deg, var(--bd-primary) 0%, var(--bd-primary-2) 100%)"}},q={class:"stat-info"},F={class:"stat-value"},G={class:"stat-content"},J={class:"stat-icon",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.95) 0%, rgba(245, 158, 11, 0.90) 100%)"}},P={class:"stat-info"},Q={class:"stat-value"},W={class:"stat-content"},Y={class:"stat-icon",style:{background:"linear-gradient(135deg, rgba(29, 78, 216, 0.95) 0%, rgba(20, 184, 166, 0.90) 100%)"}},Z={class:"stat-info"},$={class:"stat-value"},I={class:"stat-content"},tt={class:"stat-icon",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.95) 0%, rgba(20, 184, 166, 0.85) 100%)"}},et={class:"stat-info"},st={class:"stat-value"},at={__name:"index",setup(ot){const e=k({});let r=null,d=null,u=null,c=null;const h=async()=>{try{const i=await H();e.value=i,y(),b()}catch(i){console.error("加载统计数据失败:",i)}},y=()=>{const i=(t,v)=>{const l=t==null?void 0:t.find(n=>n.value===v);return Number((l==null?void 0:l.count)||0)};e.value.statusCount&&Array.isArray(e.value.statusCount)&&(e.value.statusDistribution=e.value.statusCount.map(t=>({name:t.label,value:t.count}))),e.value.riskLevelCount&&Array.isArray(e.value.riskLevelCount)&&(e.value.riskDistribution=e.value.riskLevelCount.map(t=>({name:t.label,value:t.count}))),e.value.typeCount&&Array.isArray(e.value.typeCount)&&(e.value.typeDistribution=e.value.typeCount.map(t=>({name:t.label,value:t.count}))),e.value.sourceCount&&Array.isArray(e.value.sourceCount)&&(e.value.sourceDistribution=e.value.sourceCount.map(t=>({name:t.label,value:t.count}))),e.value.statusCount&&Array.isArray(e.value.statusCount)&&(e.value.pendingCount=i(e.value.statusCount,"submitted")+i(e.value.statusCount,"assigned"),e.value.fixingCount=i(e.value.statusCount,"fixing")+i(e.value.statusCount,"retesting"),e.value.closedCount=i(e.value.statusCount,"closed"))},b=()=>{C(),w(),x(),D()},C=()=>{const i=document.getElementById("statusChart");r=_(i);const t={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"漏洞状态",type:"pie",radius:"60%",data:e.value.statusDistribution||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(t)},w=()=>{const i=document.getElementById("riskChart");d=_(i);const t={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"风险等级",type:"pie",radius:"60%",data:e.value.riskDistribution||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};d.setOption(t)},x=()=>{const i=document.getElementById("typeChart");u=_(i);const t={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"漏洞类型",type:"pie",radius:"60%",data:e.value.typeDistribution||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};u.setOption(t)},D=()=>{const i=document.getElementById("sourceChart");c=_(i);const t={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"漏洞来源",type:"pie",radius:"60%",data:e.value.sourceDistribution||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};c.setOption(t)},g=()=>{r==null||r.resize(),d==null||d.resize(),u==null||u.resize(),c==null||c.resize()};return z(()=>{h(),window.addEventListener("resize",g)}),A(()=>{r==null||r.dispose(),d==null||d.dispose(),u==null||u.dispose(),c==null||c.dispose(),window.removeEventListener("resize",g)}),(i,t)=>{const v=N,l=L,n=S,m=T;return O(),E("div",K,[a(m,{gutter:20},{default:o(()=>[a(n,{span:6},{default:o(()=>[a(l,{shadow:"hover",class:"stat-card"},{default:o(()=>[s("div",U,[s("div",j,[a(v,{size:32},{default:o(()=>[a(p(V))]),_:1})]),s("div",q,[t[0]||(t[0]=s("div",{class:"stat-label"},"漏洞总数",-1)),s("div",F,f(e.value.totalCount||0),1)])])]),_:1})]),_:1}),a(n,{span:6},{default:o(()=>[a(l,{shadow:"hover",class:"stat-card"},{default:o(()=>[s("div",G,[s("div",J,[a(v,{size:32},{default:o(()=>[a(p(X))]),_:1})]),s("div",P,[t[1]||(t[1]=s("div",{class:"stat-label"},"待处理",-1)),s("div",Q,f(e.value.pendingCount||0),1)])])]),_:1})]),_:1}),a(n,{span:6},{default:o(()=>[a(l,{shadow:"hover",class:"stat-card"},{default:o(()=>[s("div",W,[s("div",Y,[a(v,{size:32},{default:o(()=>[a(p(R))]),_:1})]),s("div",Z,[t[2]||(t[2]=s("div",{class:"stat-label"},"修复中",-1)),s("div",$,f(e.value.fixingCount||0),1)])])]),_:1})]),_:1}),a(n,{span:6},{default:o(()=>[a(l,{shadow:"hover",class:"stat-card"},{default:o(()=>[s("div",I,[s("div",tt,[a(v,{size:32},{default:o(()=>[a(p(M))]),_:1})]),s("div",et,[t[3]||(t[3]=s("div",{class:"stat-label"},"已关闭",-1)),s("div",st,f(e.value.closedCount||0),1)])])]),_:1})]),_:1})]),_:1}),a(m,{gutter:20,style:{"margin-top":"20px"}},{default:o(()=>[a(n,{span:12},{default:o(()=>[a(l,{shadow:"never"},{header:o(()=>[...t[4]||(t[4]=[s("div",{class:"card-header"},[s("span",{class:"card-title"},"漏洞状态分布")],-1)])]),default:o(()=>[t[5]||(t[5]=s("div",{id:"statusChart",style:{height:"300px"}},null,-1))]),_:1})]),_:1}),a(n,{span:12},{default:o(()=>[a(l,{shadow:"never"},{header:o(()=>[...t[6]||(t[6]=[s("div",{class:"card-header"},[s("span",{class:"card-title"},"风险等级分布")],-1)])]),default:o(()=>[t[7]||(t[7]=s("div",{id:"riskChart",style:{height:"300px"}},null,-1))]),_:1})]),_:1})]),_:1}),a(m,{gutter:20,style:{"margin-top":"20px"}},{default:o(()=>[a(n,{span:12},{default:o(()=>[a(l,{shadow:"never"},{header:o(()=>[...t[8]||(t[8]=[s("div",{class:"card-header"},[s("span",{class:"card-title"},"漏洞类型分布")],-1)])]),default:o(()=>[t[9]||(t[9]=s("div",{id:"typeChart",style:{height:"300px"}},null,-1))]),_:1})]),_:1}),a(n,{span:12},{default:o(()=>[a(l,{shadow:"never"},{header:o(()=>[...t[10]||(t[10]=[s("div",{class:"card-header"},[s("span",{class:"card-title"},"漏洞来源分布")],-1)])]),default:o(()=>[t[11]||(t[11]=s("div",{id:"sourceChart",style:{height:"300px"}},null,-1))]),_:1})]),_:1})]),_:1})])}}},ut=B(at,[["__scopeId","data-v-c5871288"]]);export{ut as default};
